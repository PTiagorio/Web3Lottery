{"ast":null,"code":"var _jsxFileName = \"/Users/tiagoferreira/Desktop/web3-lottery/front-end/src/util/interact.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nrequire('dotenv').config();\n\nconst alchemyKey = process.env.REACT_APP_ALCHEMY_KEY;\n\nconst {\n  createAlchemyWeb3\n} = require(\"@alch/alchemy-web3\");\n\nconst web3 = createAlchemyWeb3(alchemyKey);\n\nconst contractABI = require(\"../contract-abi.json\");\n\nconst contractAddress = \"0x928D2Dc6E18b72EcCFfa3Eb48d56c8D66C86db74\";\nexport const lotteryContract = new web3.eth.Contract(contractABI.abi, contractAddress);\nexport const loadCurrentLottery = async () => {\n  const lottery = await lotteryContract.methods.Lottery().call();\n  return lottery;\n};\nexport const connectWallet = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: \"eth_requestAccounts\"\n      });\n      const obj = {\n        address: addressArray[0]\n      };\n      return obj;\n    } catch (err) {\n      return {\n        address: \"\",\n        status: \"üò• \" + err.message\n      };\n    }\n  } else {\n    return {\n      address: \"\",\n      status: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", \"\\uD83E\\uDD8A\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            target: \"_blank\",\n            href: `https://metamask.io/download`,\n            children: \"You must install Metamask, a virtual Ethereum wallet, in your browser.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 13\n      }, this)\n    };\n  }\n};\nexport const getCurrentWalletConnected = async () => {\n  if (window.ethereum) {\n    try {\n      const addressArray = await window.ethereum.request({\n        method: \"eth_accounts\"\n      });\n\n      if (addressArray.length > 0) {\n        return {\n          address: addressArray[0]\n        };\n      } else {\n        return {\n          address: \"\",\n          status: \"ü¶ä Connect to Metamask using the top right button.\"\n        };\n      }\n    } catch (err) {\n      return {\n        address: \"\",\n        status: \"üò• \" + err.message\n      };\n    }\n  } else {\n    return {\n      address: \"\",\n      status: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", \"\\uD83E\\uDD8A\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            target: \"_blank\",\n            href: `https://metamask.io/download`,\n            children: \"You must install Metamask, a virtual Ethereum wallet, in your browser.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this)\n    };\n  }\n}; //set up transaction parameters\n\nconst transactionParameters = {\n  to: contractAddress,\n  // Required except during contract publications.\n  from: address,\n  // must match user's active address.\n  data: helloWorldContract.methods.update(message).encodeABI()\n};\nexport const endLottery = async (address, message) => {\n  sendTransaction(address, message, lotteryContract.methods.endLottery().encodeABI());\n};\nexport const startLottery = async (address, message, amountOfDays, ticketPrice) => {\n  sendTransaction(address, message, lotteryContract.methods.startLottery(amountOfDays, ticketPrice).encodeABI());\n};\nexport const buyTicket = async (address, message) => {\n  sendTransaction(address, message, lotteryContract.methods.buyTicket().encodeABI());\n};\nexport const changeTicketPrice = async (address, message, ticketPrice) => {\n  sendTransaction(address, message, lotteryContract.methods.changeTicketPrice().encodeABI());\n};\nexport const cancelLottery = async (address, message) => {\n  sendTransaction(address, message, lotteryContract.methods.cancelLottery().encodeABI());\n};\nexport const retrySubmissionOfFounds = async (address, message) => {\n  sendTransaction(address, message, lotteryContract.methods.retrySubmissionOfFounds().encodeABI());\n};\nexport const sendTransaction = async (address, message, dataMethod) => {\n  //input error handling\n  if (!window.ethereum || address === null) {\n    return {\n      status: \"üí° Connect your Metamask wallet to update the message on the blockchain.\"\n    };\n  }\n\n  if (message.trim() === \"\") {\n    return {\n      status: \"‚ùå Your message cannot be an empty string.\"\n    };\n  } //set up transaction parameters\n\n\n  const transactionParameters = {\n    to: contractAddress,\n    // Required except during contract publications.\n    from: address,\n    // must match user's active address.\n    data: dataMethod\n  }; //sign the transaction\n\n  try {\n    const txHash = await window.ethereum.request({\n      method: \"eth_sendTransaction\",\n      params: [transactionParameters]\n    });\n    return {\n      status: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u2705\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n          target: \"_blank\",\n          href: `https://goerli.etherscan.io/tx/${txHash}`,\n          children: \"View the status of your transaction on Etherscan!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this), \"\\u2139\\uFE0F Once the transaction is verified by the network, the message will be updated automatically.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this)\n    };\n  } catch (error) {\n    return {\n      status: \"üò• \" + error.message\n    };\n  }\n};","map":{"version":3,"sources":["/Users/tiagoferreira/Desktop/web3-lottery/front-end/src/util/interact.js"],"names":["require","config","alchemyKey","process","env","REACT_APP_ALCHEMY_KEY","createAlchemyWeb3","web3","contractABI","contractAddress","lotteryContract","eth","Contract","abi","loadCurrentLottery","lottery","methods","Lottery","call","connectWallet","window","ethereum","addressArray","request","method","obj","address","err","status","message","getCurrentWalletConnected","length","transactionParameters","to","from","data","helloWorldContract","update","encodeABI","endLottery","sendTransaction","startLottery","amountOfDays","ticketPrice","buyTicket","changeTicketPrice","cancelLottery","retrySubmissionOfFounds","dataMethod","trim","txHash","params","error"],"mappings":"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","sourcesContent":["require('dotenv').config();\nconst alchemyKey = process.env.REACT_APP_ALCHEMY_KEY;\nconst { createAlchemyWeb3 } = require(\"@alch/alchemy-web3\");\nconst web3 = createAlchemyWeb3(alchemyKey); \n\nconst contractABI = require(\"../contract-abi.json\");\nconst contractAddress = \"0x928D2Dc6E18b72EcCFfa3Eb48d56c8D66C86db74\";\n\nexport const lotteryContract = new web3.eth.Contract(\n    contractABI.abi,\n    contractAddress\n);\n\nexport const loadCurrentLottery = async () => { \n    const lottery = await lotteryContract.methods.Lottery().call();\n    return lottery;\n};\n\nexport const connectWallet = async () => {\n    if (window.ethereum) {\n        try {\n        const addressArray = await window.ethereum.request({\n            method: \"eth_requestAccounts\",\n        });\n        const obj = {\n            address: addressArray[0],\n        };\n        return obj;\n        } catch (err) {\n        return {\n            address: \"\",\n            status: \"üò• \" + err.message,\n        };\n        }\n    } else {\n        return {\n        address: \"\",\n        status: (\n            <span>\n            <p>\n                {\" \"}\n                ü¶ä{\" \"}\n                <a target=\"_blank\" href={`https://metamask.io/download`}>\n                You must install Metamask, a virtual Ethereum wallet, in your\n                browser.\n                </a>\n            </p>\n            </span>\n        ),\n        };\n    }\n};\n\nexport const getCurrentWalletConnected = async () => {\n    if (window.ethereum) {\n        try {\n        const addressArray = await window.ethereum.request({\n            method: \"eth_accounts\",\n        });\n        if (addressArray.length > 0) {\n            return {\n            address: addressArray[0],\n            };\n        } else {\n            return {\n            address: \"\",\n            status: \"ü¶ä Connect to Metamask using the top right button.\",\n            };\n        }\n        } catch (err) {\n        return {\n            address: \"\",\n            status: \"üò• \" + err.message,\n        };\n        }\n    } else {\n        return {\n        address: \"\",\n        status: (\n            <span>\n            <p>\n                {\" \"}\n                ü¶ä{\" \"}\n                <a target=\"_blank\" href={`https://metamask.io/download`}>\n                You must install Metamask, a virtual Ethereum wallet, in your\n                browser.\n                </a>\n            </p>\n            </span>\n        ),\n        };\n    }\n};\n\n\n//set up transaction parameters\nconst transactionParameters = {\n    to: contractAddress, // Required except during contract publications.\n    from: address, // must match user's active address.\n    data: helloWorldContract.methods.update(message).encodeABI(),\n};\n\nexport const endLottery = async (address, message) => {\n    sendTransaction(address, message, lotteryContract.methods.endLottery().encodeABI());\n}\n\nexport const startLottery = async (address, message, amountOfDays, ticketPrice) => {\n    sendTransaction(address, message, lotteryContract.methods.startLottery(amountOfDays, ticketPrice).encodeABI());\n}\n\nexport const buyTicket = async (address, message) => {\n    sendTransaction(address, message, lotteryContract.methods.buyTicket().encodeABI());\n}\n\nexport const changeTicketPrice = async (address, message, ticketPrice) => {\n    sendTransaction(address, message, lotteryContract.methods.changeTicketPrice().encodeABI());\n}\n\nexport const cancelLottery = async (address, message) => {\n    sendTransaction(address, message, lotteryContract.methods.cancelLottery().encodeABI());\n}\n\nexport const retrySubmissionOfFounds = async (address, message) => {\n    sendTransaction(address, message, lotteryContract.methods.retrySubmissionOfFounds().encodeABI());\n}\n\nexport const sendTransaction = async (address, message, dataMethod) => {\n\n    //input error handling\n    if (!window.ethereum || address === null) {\n      return {\n        status:\n          \"üí° Connect your Metamask wallet to update the message on the blockchain.\",\n      };\n    }\n  \n    if (message.trim() === \"\") {\n      return {\n        status: \"‚ùå Your message cannot be an empty string.\",\n      };\n    }\n  \n    //set up transaction parameters\n    const transactionParameters = {\n      to: contractAddress, // Required except during contract publications.\n      from: address, // must match user's active address.\n      data: dataMethod,\n    };\n  \n    //sign the transaction\n    try {\n      const txHash = await window.ethereum.request({\n        method: \"eth_sendTransaction\",\n        params: [transactionParameters],\n      });\n      return {\n        status: (\n          <span>\n            ‚úÖ{\" \"}\n            <a target=\"_blank\" href={`https://goerli.etherscan.io/tx/${txHash}`}>\n              View the status of your transaction on Etherscan!\n            </a>\n            <br />\n            ‚ÑπÔ∏è Once the transaction is verified by the network, the message will\n            be updated automatically.\n          </span>\n        ),\n      };\n    } catch (error) {\n      return {\n        status: \"üò• \" + error.message,\n      };\n    }\n  };"]},"metadata":{},"sourceType":"module"}